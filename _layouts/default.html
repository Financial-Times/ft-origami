<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>{{ page.title }} - {{ site.name }}</title>
        <meta name="viewport" content="width=device-width">
        <meta name="robots" content="noindex, nofollow">

        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/css/bootstrap.min.css">
        <link rel="stylesheet" href="{{ site.baseurl }}/css/main.css">
        <link rel="stylesheet" href="http://assets.annotateit.org/annotator/v1.2.5/annotator.min.css">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">

        <script src='//cdnjs.cloudflare.com/ajax/libs/showdown/0.3.1/showdown.min.js'></script>
        <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js'></script>
        <script src='{{ site.baseurl }}/js/annotator-full.js'></script>
    </head>
    <body>

      <div class="container">

        <div class='row'>
          <div class='col-lg-12'>
            <div class='page-header'>
              <h1>{{ site.name }}</h1>
              <p class='lead'>Universal front end component standards for FT web products</p>
            </div>
          </div>
        </div>

        <div class='row'>

          <div class='col-lg-3'>
            <ul class="nav sidebar">
              <li class="{% if page.title == 'Home' %}active{% endif %}">
                <a href="{{ site.baseurl }}/">Home</a>
              </li>
              <li class="{% if page.title == 'Overview' %}active{% endif %}">
                <a href="{{ site.baseurl }}/docs/overview">Overview</a>
              </li>
              <li class="{% if page.title == 'Principles' %}active{% endif %}">
                <a href="{{ site.baseurl }}/docs/principles">Principles</a>
              </li>
              <li class="{% if page.title == 'Component types' %}active{% endif %}">
                <a href="{{ site.baseurl }}/docs/component-types">Component types</a>
                {% if page.section == 'Component types' %}
                <ul class='nav subnav'>
                  <li class="{% if page.title == 'Modules' %}active{% endif %}">
                    <a href="{{ site.baseurl }}/docs/component-types/modules">Modules</a>
                  </li>
                  <li class="{% if page.title == 'Web services' %}active{% endif %}">
                    <a href="{{ site.baseurl }}/docs/component-types/web-services">Web services</a>
                  </li>
                  <li class="{% if page.title == 'Client side includes' %}active{% endif %}">
                    <a href="{{ site.baseurl }}/docs/component-types/client-includes">Client side includes</a>
                  </li>
                  <li class="{% if page.title == 'Middleware' %}active{% endif %}">
                    <a href="{{ site.baseurl }}/docs/component-types/middleware">Middleware</a>
                  </li>
                </ul>
                {% endif %}
              </li>
              <li class="{% if page.title == 'Build service' %}active{% endif %}">
                <a href="{{ site.baseurl }}/docs/build-service">Build service</a>
              </li>
              <li class="{% if page.title == 'Syntax requirements' %}active{% endif %}">
                <a href="{{ site.baseurl }}/docs/syntax-requirements">Syntax requirements</a>
              </li>
              <li class="{% if page.title == 'Use cases' %}active{% endif %}">
                <a href="{{ site.baseurl }}/docs/use-cases">Use case examples</a>
              </li>
              <li class="{% if page.title == 'Roadmap' %}active{% endif %}">
                <a href="{{ site.baseurl }}/docs/roadmap">Roadmap and current activity</a>
              </li>
            </ul>

            <p class='annotator-link'><i class='icon-edit'></i> <a href=''>Login with Github</a> to annotate and view existing annotations.</p>
          </div>

          <div class='col-lg-9 main'>
            {{ content }}
          </div>

        </div> <!-- /row -->
      </div> <!-- /container -->

      <div class='footer'>
        <div class='container'>
          <div class='row'>
            <div class='col-lg-12'>
              <p class='pull-right'><a href='http://github.com/financial-times/ft-origami'>View project on Github</a></p>
              <p>&copy; THE FINANCIAL TIMES LTD {{ site.time | date:'%Y' }}. FT and 'Financial Times' are trademarks of The Financial Times Ltd.</p>
            </div>
          </div>
        </div>
      </div>

      <script>
      jQuery(function ($) {
        $.ajax({
          url: 'http://dev.labs.ft.com/andrew/annotator/token.php',
          xhrFields: {
            withCredentials: true
          },
          success: function(resp) {
            if (resp !== "Not authenticated") {
              resp = JSON.parse(resp);
              $('.main').annotator().annotator('setupPlugins', {
                tokenUrl: 'http://dev.labs.ft.com/andrew/annotator/token.php'
              }, {
                Auth: {
                  token: resp.token
                },
                Store: {
                  showViewPermissionsCheckbox: false,
                  showEditPermissionsCheckbox: false
                },
                Permissions: {
                  user: resp.name,
                  permissions: {
                    'read':   [],
                    'update': [],
                    'delete': [],
                    'admin':  []
                  }
                }
              });
            } else {
              $('.annotator-link').show().find('a').attr('href', 'http://dev.labs.ft.com/andrew/annotator/token.php?login=1&redir='+encodeURIComponent(location.href));
            }
          }
        })
      });
      </script>
    </body>
</html>
